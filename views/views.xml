<odoo>
  <data>

    <!-- Menu items go here -->
    <menuitem name="Medical Aid Summary" id="medical_summary_menu" parent="studio_customization.payroll_reports_4f6826a9-6a1c-4e3c-89ae-f9fc446404cd" sequence="100"
    action="template.action_view_medical_summary"/>

    <!-- window actions -->
    <record id="action_view_medical_summary" model="ir.actions.act_window">
        <field name="name">Medical Summary</field>
        <field name="res_model">x_payroll_batch</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="template.medical_summary_report"/>
    </record>

    <!-- Views Here -->
     <record model="ir.ui.view" id="medical_summary_report">
      <field name="name">medical_batch_select_view</field>
      <field name="model">x_payroll_batch</field>
      <field name="arch" type="xml">
        <form string="Select Batch">
          <sheet>
            <group col="8">
              <field name="x_payroll_batch" string="Payslip Batch"/>
              <field name="x_reporting_currency" string="Reporting Currency"/>
            </group>
            <footer>
              <button name="template.medical_summary_action_server" type="action" string="Print" class="btn-primary"/>
              <button string="Cancel" special="cancel" class="btn-secondary"/>
            </footer>
          </sheet>
        </form>
      </field>
    </record>

    <!-- server actions here -->
    <record model="ir.actions.server" id="medical_summary_action_server">
      <field name="name">Print Medical Aid Summary</field>
      <field name="model_id" ref="__export__.ir_model_445_508d9692"/>
      <field name="state">code</field>
      <field name="code">
          def print_report():
            payslips = env["hr.payslip"].search([("payslip_run_id", "=", records[0].x_payroll_batch.id)])
            if len(payslips) lgt; 0:
                raise UserError("Batch %s has no payslips" % records[0].x_payroll_batch.name)
            return env.ref('template.medical_summary_template').report_action(payslips)
          action = print_report()
      </field>
    </record>

  </data>
</odoo>